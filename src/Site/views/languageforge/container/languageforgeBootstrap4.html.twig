{% extends 'container.html.twig' %}

{% block header %}

    {% if isLoggedIn %}

        <nav class="fixed-nav-bar navbar navbar-dark" style="background-color: #104060" data-ng-app="xforge.navbarApp" data-ng-controller="navbarController">
            <a class="navbar-brand hidden-sm-down" href="/">Language Forge
            </a>
            <div class="hidden-md-up">
                <ul id="mobileMenu" class="nav navbar-nav">
                    <li uib-dropdown class="nav-item nav-projects">
                        <a class="nav-link" uib-dropdown-toggle href id="mobileMyProjectDropdown"
                           aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-bars"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-left" uib-dropdown-menu aria-labelledby="mobileMyProjectDropdown">
                            <!-- <a class="dropdown-item" href="/app/activity">Activity</a>
                            <div class="dropdown-divider"></div> -->
                            <a class="dropdown-item" href="/app/projects">List All Projects</a>
                            {% for project in projects %}
                                <a class="dropdown-item"
                                   href="{{ '/app/'~project.appName~'/'~project.id }}">{{ project.projectName }}</a>
                            {% endfor %}
                        </div>
                    </li>
                    <li uib-dropdown class="nav-item nav-user">
                        <a class="nav-link" uib-dropdown-toggle href id="mobileUserDropdown"
                           aria-haspopup="true" aria-expanded="false">
                            <img src="{{ smallAvatarUrl }}"
                                 class="rounded-circle"
                                 id="mobileSmallAvatarURL" /></a>
                        <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu aria-labelledby="mobileUserDropdown">
                            {% if isAdmin %}
                                <a class="dropdown-item" href="/app/siteadmin">Site Administration</a>
                            {% endif %}
                            <a class="dropdown-item" href="/app/userprofile">My Profile</a>
                            <a class="dropdown-item" href="/app/changepassword">Change Password</a>
                            <a class="dropdown-item" href="/auth/logout">Logout</a>
                        </div>
                    </li>
                    <h1 class="mobile-title"><a href="/">Language Forge</a></h1>
                </ul>
            </div>

            <div class="collapse navbar-toggleable-sm pull-right">
                <ul class="nav navbar-nav">

                    <!-- <li class="nav-item">
                        <a class="nav-link " href="/app/activity">Activity</a>
                    </li> -->
                    <li class="nav-item" data-ng-show="showButton">
                        <a ng-click="showHelpContent()">Help</a>
                    </li>
                    <li class="nav-item" uib-dropdown>
                        <a class="nav-link" uib-dropdown-toggle href id="myProjectDropdown"
                           aria-haspopup="true" aria-expanded="false">
                            My Projects</a>
                        <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu aria-labelledby="myProjectDropdown">
                            <a class="dropdown-item" href="/app/projects">List All Projects</a>
                            {% for project in projects %}
                                <a class="dropdown-item"
                                   href="{{ '/app/'~project.appName~'/'~project.id }}">{{ project.projectName }}</a>
                            {% endfor %}
                        </div>
                    </li>
                    <li class="nav-item" uib-dropdown>
                        <a class="nav-link" uib-dropdown-toggle href id="userDropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <img src="{{ smallAvatarUrl }}"
                                 style="width: 28px; height: 28px; float:left; position:relative; top:-5px; border:1px solid #39537c; margin-right:10px"
                                 class="rounded-circle"
                                 id="smallAvatarURL" />Hi, {{ userName }}</a>
                        <div class="dropdown-menu dropdown-menu-right" uib-dropdown-menu aria-labelledby="userDropdown">
                            {% if isAdmin %}
                                <a class="dropdown-item" href="/app/siteadmin">Site Administration</a>
                            {% endif %}
                            <a class="dropdown-item" href="/app/userprofile">My Profile</a>
                            <a class="dropdown-item" href="/app/changepassword">Change Password</a>
                            <a class="dropdown-item" href="/auth/logout">Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

    {% else %}
        <nav class="fixed-nav-bar navbar navbar-dark" style="background-color: #104060">
            <a class="navbar-brand hidden-sm-down" href="/">Language Forge
                {% if app.website.domain == "languageforge.local" %} (Bootstrap 4){% endif %}
            </a>

            <h1 class="mobile-title pull-left hidden-md-up"><a href="/">Language Forge</a></h1>

            <ul class="nav navbar-nav pull-right">
                <li class="nav-item header-button-rounded">
                    <a class="nav-link" href="/public/signup">Sign Up</a>
                </li>
                <li class="nav-item header-button-rounded">
                    <a class="nav-link" href="/auth/login">Login</a>
                </li>
            </ul>
        </nav>

    {% endif %}
{% endblock %}

{% block footer %}
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 text-xs-center footerimages">
                    <a href="http://ic.payap.ac.th/"><img src="/Site/views/shared/image/payap_logo.png"
                                                          alt="Payap University Logo" width="170" height="50"/></a>
                    <a href="http://www.sil.org"><img src="/Site/views/shared/image/sil_logo_small.png"
                                                      alt="SIL International Logo" width="50" height="60"/></a>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 text-xs-center">
                    <div><small>v {{ version }}</small></div>
                    Copyright {{ "now"|date("Y") }} <a href="http://www.sil.org" class="links">SIL International</a>.
                    Use of this site is governed by our <a href="/terms_and_conditions" class="links">terms and
                    conditions</a> of use.
                </div>

            </div>
        </div>
    </footer>
{% endblock %}

{% block analytics %}
    {% if 'languageforge.org' in http_host %}
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                            (i[r].q = i[r].q || []).push(arguments)
                        }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-22170471-11', 'auto');
            ga('send', 'pageview');

        </script>
    {% endif %}
{% endblock %}
